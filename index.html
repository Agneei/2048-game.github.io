<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <meta name="viewport" content="width=device-width,height=device-height, initial-scale=1,user-scalable=no">
    <link href="https://fonts.googleapis.com/css?family=Lobster|Arapey|Fauna One" rel="stylesheet" type="text/css">
    <link href="css/style.css" rel="stylesheet" type="text/css" media="all" />
    <script src="js/jquery-3.4.1.js"></script>
    <script src="js/common%20.js"></script>
    <script src="js/animation.js"></script>
    <script src="js/main.js"></script>
</head>
<body>
    <div class="wrap">
        <div id="header">
            <h1><span class="title">2048</span></h1>
            <div><span class="face">ヾ(๑╹◡╹)ﾉ”</span></div>
            <h3><a class="author" href="#">Created by @Agneei</a></h3>
            <div style="clear: both"></div>
            <div class="wrapper">
                <div class="score-wrapper">
                    <span class="text">score:</span>
                    <span id="score">0</span>
                </div>
            <div class="new"><a href="javascript:newgame()">New Game</a></div>
            </div>
        </div>
        <div id="grid-container">
            <div class="grid-cell" id="grid-cell-0-0"></div>
            <div class="grid-cell" id="grid-cell-0-1"></div>
            <div class="grid-cell" id="grid-cell-0-2"></div>
            <div class="grid-cell" id="grid-cell-0-3"></div>

            <div class="grid-cell" id="grid-cell-1-0"></div>
            <div class="grid-cell" id="grid-cell-1-1"></div>
            <div class="grid-cell" id="grid-cell-1-2"></div>
            <div class="grid-cell" id="grid-cell-1-3"></div>

            <div class="grid-cell" id="grid-cell-2-0"></div>
            <div class="grid-cell" id="grid-cell-2-1"></div>
            <div class="grid-cell" id="grid-cell-2-2"></div>
            <div class="grid-cell" id="grid-cell-2-3"></div>

            <div class="grid-cell" id="grid-cell-3-0"></div>
            <div class="grid-cell" id="grid-cell-3-1"></div>
            <div class="grid-cell" id="grid-cell-3-2"></div>
            <div class="grid-cell" id="grid-cell-3-3"></div>
        </div>
        <div id="audioBox">
            <script type="text/javascript">
                window.onload = function(){
                    var arr = [src="music/ぼくのりりっくのぼうよみ - subobjective.mp3",src="music/limbo - airplane mode.mp3"]; //把需要播放的歌曲从后往前排，这里已添加两首音乐，可继续添加多个音乐
                    var myAudio = new Audio();
                    myAudio.preload = true;
                    myAudio.controls = true;
                    myAudio.src = arr.pop();         //每次读数组最后一个元素
                    myAudio.addEventListener('ended', playEndedHandler, false);
                    myAudio.play();
                    document.getElementById("audioBox").appendChild(myAudio);
                    myAudio.loop = false;//禁止循环，否则无法触发ended事件
                    myAudio.autoplay = true;
                    function playEndedHandler(){
                        myAudio.src = arr.pop();
                        myAudio.play();
                        console.log(arr.length);
                        !arr.length && myAudio.removeEventListener('ended',playEndedHandler,false);//只有一个元素时解除绑定
                    }
                }
            </script>
        </div>
    </div>


</body>
</html>